# ============================================================
# QA: пример настроек для тестов
# ============================================================
# Скопируйте в .env и подставьте свои значения.
#
# make test-api-gateway-local:
#   psds/api-gateway по умолчанию: config/config.yaml port 8080.
#   Ручки: GET /health, GET /api/v1/status, GET /openapi.json, /api/v1/video/*, /api/v1/clients/*.
#   Эндпоинта rate limiting в gateway нет — тест rate_limiting будет пропущен.
#
# make test-user-service-local:
#   Через Gateway: оба URL = адрес gateway (например http://localhost:8080).
#   Только User Service: оба URL = адрес user-service (например http://localhost:8080).
# ============================================================

TEST_ENV=local

# --- Базовые URL ---
# API Gateway (порт 8084 = docker-compose)
API_GATEWAY_BASE_URL=http://localhost:8084
# User Service (отдельно или через gateway). Health-check проверяет оба.
USER_SERVICE_BASE_URL=http://localhost:8080

# Пути API (User Service / прокси gateway)
API_USERS_REGISTER_PATH=/api/v1/auth/register
API_AUTH_LOGIN_PATH=/api/v1/auth/login

WEBSOCKET_BASE_URL=ws://localhost:8080

# --- Микросервисы (порты = docker-compose) ---
STREAMING_SERVICE_BASE_URL=http://localhost:8090
STREAMING_WS_BASE_URL=ws://localhost:8090
SESSION_MANAGER_SERVICE_BASE_URL=http://localhost:8091
NOTIFICATION_SERVICE_BASE_URL=http://localhost:8092
NOTIFICATION_WS_BASE_URL=ws://localhost:8092
DATA_CHANNEL_SERVICE_BASE_URL=http://localhost:8093
DATA_CHANNEL_WS_BASE_URL=ws://localhost:8093
OPERATOR_POOL_SERVICE_BASE_URL=http://localhost:8094
TICKET_SERVICE_BASE_URL=http://localhost:8095
RECORDING_SERVICE_BASE_URL=http://localhost:8096
OPERATOR_DIRECTORY_SERVICE_BASE_URL=http://localhost:8098
SEARCH_SERVICE_BASE_URL=http://localhost:8099

ALLURE_RESULTS_DIR=allure-results

# --- Опционально: JIRA / Slack / Teams ---
JIRA_BASE_URL=https://jira.example.com
JIRA_PROJECT_KEY=PSDS
JIRA_USERNAME=
JIRA_API_TOKEN=
SLACK_WEBHOOK_URL=
TEAMS_WEBHOOK_URL=

# --- БД (если нужны тесты с БД) ---
# api-gateway: DB_HOST, DB_PORT=5432, DB_NAME=api_gateway, DB_USER=postgres
# user-service: DB_NAME=user_service
DB_HOST=localhost
DB_PORT=5432
DB_NAME=api_gateway
DB_USER=postgres
DB_PASSWORD=postgres

RATE_LIMIT_TEST_USER=user_rate_limit@example.com

TEST_LOG_FILE=logs/test.log
